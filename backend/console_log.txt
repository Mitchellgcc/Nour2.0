
> nour2.0-backend@1.0.0 test
> jest --detectOpenHandles

(node:44506) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)
(node:44506) [MONGODB DRIVER] Warning: useNewUrlParser is a deprecated option: useNewUrlParser has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
(node:44506) [MONGODB DRIVER] Warning: useUnifiedTopology is a deprecated option: useUnifiedTopology has no effect since Node.js Driver version 4.0.0 and will be removed in the next major version
  console.log
    MongoDB Memory Server URI: mongodb://127.0.0.1:2572/

      at Object.log (tests/mealPlanService.test.js:138:11)

  console.log
    Synchronizing Sequelize...

      at Object.log (tests/mealPlanService.test.js:151:11)

  console.log
    Sequelize synchronized.

      at Object.log (tests/mealPlanService.test.js:153:11)

  console.log
    Dropping MongoDB database...

      at Object.log (tests/mealPlanService.test.js:158:11)

  console.log
    MongoDB database dropped.

      at Object.log (tests/mealPlanService.test.js:160:11)

  console.log
    Syncing Sequelize database...

      at Object.log (tests/mealPlanService.test.js:162:11)

  console.log
    Sequelize database synced.

      at Object.log (tests/mealPlanService.test.js:164:11)

  console.log
    Inserting mock meals...

      at Object.log (tests/mealPlanService.test.js:167:11)

  console.error
    Error inserting mock meals: Error: 
        at Query.run (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/postgres/query.js:76:25)
        at /Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/sequelize.js:650:28
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at PostgresQueryInterface.bulkInsert (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/abstract/query-interface.js:881:21)
        at recursiveBulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2851:25)
        at Function.bulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2977:12)
        at Object.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/tests/mealPlanService.test.js:169:5) {
      name: 'SequelizeDatabaseError',
      parent: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.813 +00:00','2024-06-20 11:14:50.813 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.813 +00:00','2024-06-20 11:14:50.813 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      original: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.813 +00:00','2024-06-20 11:14:50.813 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.813 +00:00','2024-06-20 11:14:50.813 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.813 +00:00','2024-06-20 11:14:50.813 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.813 +00:00','2024-06-20 11:14:50.813 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
      parameters: {}
    }

      169 |     await Meal.bulkCreate(mockMeals);
      170 |   } catch (error) {
    > 171 |     console.error("Error inserting mock meals:", error);
          |             ^
      172 |   }
      173 |   console.log("Mock meals inserted.");
      174 |

      at Object.error (tests/mealPlanService.test.js:171:13)

  console.log
    Mock meals inserted.

      at Object.log (tests/mealPlanService.test.js:173:11)

  console.log
    Creating mock user preferences...

      at Object.log (tests/mealPlanService.test.js:175:11)

  console.log
    Mock user preferences created.

      at Object.log (tests/mealPlanService.test.js:177:11)

  console.log
    Creating mock Whoop data...

      at Object.log (tests/mealPlanService.test.js:179:11)

  console.log
    Dropping MongoDB database...

      at Object.log (tests/mealPlanService.test.js:158:11)

  console.log
    MongoDB database dropped.

      at Object.log (tests/mealPlanService.test.js:160:11)

  console.log
    Syncing Sequelize database...

      at Object.log (tests/mealPlanService.test.js:162:11)

  console.log
    Sequelize database synced.

      at Object.log (tests/mealPlanService.test.js:164:11)

  console.log
    Inserting mock meals...

      at Object.log (tests/mealPlanService.test.js:167:11)

  console.error
    Error inserting mock meals: Error: 
        at Query.run (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/postgres/query.js:76:25)
        at /Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/sequelize.js:650:28
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at PostgresQueryInterface.bulkInsert (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/abstract/query-interface.js:881:21)
        at recursiveBulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2851:25)
        at Function.bulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2977:12)
        at Object.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/tests/mealPlanService.test.js:169:5) {
      name: 'SequelizeDatabaseError',
      parent: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.877 +00:00','2024-06-20 11:14:50.877 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.877 +00:00','2024-06-20 11:14:50.877 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      original: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.877 +00:00','2024-06-20 11:14:50.877 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.877 +00:00','2024-06-20 11:14:50.877 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.877 +00:00','2024-06-20 11:14:50.877 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.877 +00:00','2024-06-20 11:14:50.877 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
      parameters: {}
    }

      169 |     await Meal.bulkCreate(mockMeals);
      170 |   } catch (error) {
    > 171 |     console.error("Error inserting mock meals:", error);
          |             ^
      172 |   }
      173 |   console.log("Mock meals inserted.");
      174 |

      at Object.error (tests/mealPlanService.test.js:171:13)

  console.log
    Mock meals inserted.

      at Object.log (tests/mealPlanService.test.js:173:11)

  console.log
    Creating mock user preferences...

      at Object.log (tests/mealPlanService.test.js:175:11)

  console.log
    Mock user preferences created.

      at Object.log (tests/mealPlanService.test.js:177:11)

  console.log
    Creating mock Whoop data...

      at Object.log (tests/mealPlanService.test.js:179:11)

  console.log
    Dropping MongoDB database...

      at Object.log (tests/mealPlanService.test.js:158:11)

  console.log
    MongoDB database dropped.

      at Object.log (tests/mealPlanService.test.js:160:11)

  console.log
    Syncing Sequelize database...

      at Object.log (tests/mealPlanService.test.js:162:11)

  console.log
    Sequelize database synced.

      at Object.log (tests/mealPlanService.test.js:164:11)

  console.log
    Inserting mock meals...

      at Object.log (tests/mealPlanService.test.js:167:11)

  console.error
    Error inserting mock meals: Error: 
        at Query.run (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/postgres/query.js:76:25)
        at /Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/sequelize.js:650:28
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at PostgresQueryInterface.bulkInsert (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/abstract/query-interface.js:881:21)
        at recursiveBulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2851:25)
        at Function.bulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2977:12)
        at Object.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/tests/mealPlanService.test.js:169:5) {
      name: 'SequelizeDatabaseError',
      parent: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.899 +00:00','2024-06-20 11:14:50.899 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.899 +00:00','2024-06-20 11:14:50.899 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      original: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.899 +00:00','2024-06-20 11:14:50.899 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.899 +00:00','2024-06-20 11:14:50.899 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.899 +00:00','2024-06-20 11:14:50.899 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.899 +00:00','2024-06-20 11:14:50.899 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
      parameters: {}
    }

      169 |     await Meal.bulkCreate(mockMeals);
      170 |   } catch (error) {
    > 171 |     console.error("Error inserting mock meals:", error);
          |             ^
      172 |   }
      173 |   console.log("Mock meals inserted.");
      174 |

      at Object.error (tests/mealPlanService.test.js:171:13)

  console.log
    Mock meals inserted.

      at Object.log (tests/mealPlanService.test.js:173:11)

  console.log
    Creating mock user preferences...

      at Object.log (tests/mealPlanService.test.js:175:11)

  console.log
    Mock user preferences created.

      at Object.log (tests/mealPlanService.test.js:177:11)

  console.log
    Creating mock Whoop data...

      at Object.log (tests/mealPlanService.test.js:179:11)

  console.log
    Dropping MongoDB database...

      at Object.log (tests/mealPlanService.test.js:158:11)

  console.log
    MongoDB database dropped.

      at Object.log (tests/mealPlanService.test.js:160:11)

  console.log
    Syncing Sequelize database...

      at Object.log (tests/mealPlanService.test.js:162:11)

  console.log
    Sequelize database synced.

      at Object.log (tests/mealPlanService.test.js:164:11)

  console.log
    Inserting mock meals...

      at Object.log (tests/mealPlanService.test.js:167:11)

  console.error
    Error inserting mock meals: Error: 
        at Query.run (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/postgres/query.js:76:25)
        at /Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/sequelize.js:650:28
        at processTicksAndRejections (node:internal/process/task_queues:95:5)
        at PostgresQueryInterface.bulkInsert (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/dialects/abstract/query-interface.js:881:21)
        at recursiveBulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2851:25)
        at Function.bulkCreate (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/sequelize/src/model.js:2977:12)
        at Object.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/tests/mealPlanService.test.js:169:5) {
      name: 'SequelizeDatabaseError',
      parent: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.929 +00:00','2024-06-20 11:14:50.929 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.929 +00:00','2024-06-20 11:14:50.929 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      original: error: invalid input syntax for type uuid: "66740f2aef0d44bf08668707"
          at Parser.parseErrorMessage (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:369:69)
          at Parser.handlePacket (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:188:21)
          at Parser.parse (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/parser.ts:103:30)
          at Socket.<anonymous> (/Users/georgemitchell/Library/Mobile Documents/com~apple~CloudDocs/Nour2.0/Nour2.0/backend/node_modules/pg-protocol/src/index.ts:7:48)
          at Socket.emit (node:events:520:28)
          at addChunk (node:internal/streams/readable:559:12)
          at readableAddChunkPushByteMode (node:internal/streams/readable:510:3)
          at Socket.Readable.push (node:internal/streams/readable:390:5)
          at TCP.onStreamRead (node:internal/stream_base_commons:191:23) {
        length: 124,
        severity: 'ERROR',
        code: '22P02',
        detail: undefined,
        hint: undefined,
        position: '442',
        internalPosition: undefined,
        internalQuery: undefined,
        where: undefined,
        schema: undefined,
        table: undefined,
        column: undefined,
        dataType: undefined,
        constraint: undefined,
        file: 'uuid.c',
        line: '137',
        routine: 'string_to_uuid',
        sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.929 +00:00','2024-06-20 11:14:50.929 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.929 +00:00','2024-06-20 11:14:50.929 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
        parameters: undefined
      },
      sql: `INSERT INTO "Meals" ("id","name","description","calories","protein","carbs","fat","micronutrients","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt") VALUES ('66740f2aef0d44bf08668707','Chicken Salad','Healthy chicken salad','500','40','30','20','"{\\"Vitamin A\\":50,\\"Vitamin C\\":30,\\"Fiber\\":10,\\"Protein\\":40}"','20','10','150','0.5','1.2','2','5','3','4','300','30','7','5','"{\\"Leucine\\":2.5,\\"Lysine\\":1.8}"','"{\\"Saturated\\":1.5,\\"Monounsaturated\\":0.5,\\"Polyunsaturated\\":1,\\"TransFat\\":0.1}"','85','75','20','15','65','66740f2aef0d44bf08668708','2024-06-20 11:14:50.929 +00:00','2024-06-20 11:14:50.929 +00:00'),('66740f2aef0d44bf08668709','Vegan Stir Fry','Delicious vegan stir fry','400','20','50','15','"{\\"Vitamin A\\":30,\\"Vitamin C\\":50,\\"Fiber\\":15,\\"Protein\\":20}"','30','15','100','0.2','0.8','1.5','4','4','3','250','0','10','7','"{\\"Leucine\\":1,\\"Lysine\\":1.2}"','"{\\"Saturated\\":0.8,\\"Monounsaturated\\":0.3,\\"Polyunsaturated\\":0.7,\\"TransFat\\":0}"','90','80','10','10','70','66740f2aef0d44bf0866870a','2024-06-20 11:14:50.929 +00:00','2024-06-20 11:14:50.929 +00:00') RETURNING "id","name","description","calories","protein","carbs","fat","micronutrients","vitamins","minerals","glycemicIndex","glycemicLoad","waterContent","omega3","omega6","polyphenols","antioxidants","solubleFiber","insolubleFiber","sodium","cholesterol","fiber","sugar","aminoAcids","fattyAcids","nutrientDensityScore","healthImpactScore","inflammationScore","oxidativeStressScore","microbiomeImpactScore","userId","createdAt","updatedAt";`,
      parameters: {}
    }

      169 |     await Meal.bulkCreate(mockMeals);
      170 |   } catch (error) {
    > 171 |     console.error("Error inserting mock meals:", error);
          |             ^
      172 |   }
      173 |   console.log("Mock meals inserted.");
      174 |

      at Object.error (tests/mealPlanService.test.js:171:13)

  console.log
    Mock meals inserted.

      at Object.log (tests/mealPlanService.test.js:173:11)

  console.log
    Creating mock user preferences...

      at Object.log (tests/mealPlanService.test.js:175:11)

  console.log
    Mock user preferences created.

      at Object.log (tests/mealPlanService.test.js:177:11)

  console.log
    Creating mock Whoop data...

      at Object.log (tests/mealPlanService.test.js:179:11)

  console.log
    Disconnecting MongoDB...

      at Object.log (tests/mealPlanService.test.js:186:11)

  console.log
    MongoDB disconnected.

      at Object.log (tests/mealPlanService.test.js:193:11)

  console.log
    Closing Sequelize connection...

      at Object.log (tests/mealPlanService.test.js:196:11)

  console.log
    Sequelize connection closed.

      at Object.log (tests/mealPlanService.test.js:198:11)

FAIL tests/mealPlanService.test.js
  mealPlanService
    generateMealPlan
      ✕ should generate a meal plan based on user preferences and Whoop data (94 ms)
      ✕ should adjust meals based on real-time health data from Whoop (25 ms)
    collectUserFeedback
      ✕ should collect user feedback and store it in the database (19 ms)
    adjustMealsBasedOnFeedback
      ✕ should adjust meals based on collected user feedback (30 ms)

  ● mealPlanService › generateMealPlan › should generate a meal plan based on user preferences and Whoop data

    ValidationError: WhoopData validation failed: profile: Path `profile` is required.

      at model.Object.<anonymous>.Document.invalidate (node_modules/mongoose/lib/document.js:3307:32)
      at node_modules/mongoose/lib/document.js:3068:17
      at node_modules/mongoose/lib/schemaType.js:1388:9

  ● mealPlanService › generateMealPlan › should adjust meals based on real-time health data from Whoop

    ValidationError: WhoopData validation failed: profile: Path `profile` is required.

      at model.Object.<anonymous>.Document.invalidate (node_modules/mongoose/lib/document.js:3307:32)
      at node_modules/mongoose/lib/document.js:3068:17
      at node_modules/mongoose/lib/schemaType.js:1388:9

  ● mealPlanService › collectUserFeedback › should collect user feedback and store it in the database

    ValidationError: WhoopData validation failed: profile: Path `profile` is required.

      at model.Object.<anonymous>.Document.invalidate (node_modules/mongoose/lib/document.js:3307:32)
      at node_modules/mongoose/lib/document.js:3068:17
      at node_modules/mongoose/lib/schemaType.js:1388:9

  ● mealPlanService › adjustMealsBasedOnFeedback › should adjust meals based on collected user feedback

    ValidationError: WhoopData validation failed: profile: Path `profile` is required.

      at model.Object.<anonymous>.Document.invalidate (node_modules/mongoose/lib/document.js:3307:32)
      at node_modules/mongoose/lib/document.js:3068:17
      at node_modules/mongoose/lib/schemaType.js:1388:9

---------------------|---------|----------|---------|---------|-------------------
File                 | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s 
---------------------|---------|----------|---------|---------|-------------------
All files            |   27.77 |     6.06 |       0 |   29.41 |                   
 config              |   52.94 |        0 |       0 |   52.94 |                   
  database.js        |   52.94 |        0 |       0 |   52.94 | 22-28,33-36       
 models              |     100 |      100 |     100 |     100 |                   
  Meal.js            |     100 |      100 |     100 |     100 |                   
  UserFeedback.js    |     100 |      100 |     100 |     100 |                   
  UserPreferences.js |     100 |      100 |     100 |     100 |                   
  WhoopData.js       |     100 |      100 |     100 |     100 |                   
 services            |    6.66 |        0 |       0 |    7.24 |                   
  mealPlanService.js |    6.66 |        0 |       0 |    7.24 | 8-130             
---------------------|---------|----------|---------|---------|-------------------
Test Suites: 1 failed, 1 total
Tests:       4 failed, 4 total
Snapshots:   0 total
Time:        1.57 s, estimated 2 s
Ran all test suites.
